<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="generator" content="MarkBind 6.0.2">
    <meta name="viewport" content="width=device-width, initial-scale=1"><title>BloodNet - Developer Guide - AddressBook Level-3</title> <link rel="stylesheet" href="/tp/markbind/css/bootstrap.min.css"> <link rel="stylesheet" href="/tp/markbind/fontawesome/css/all.min.css"> <link rel="stylesheet" href="/tp/markbind/glyphicons/css/bootstrap-glyphicons.min.css"><link rel="stylesheet" href="/tp/markbind/css/codeblock-light.min.css"><link rel="stylesheet" href="/tp/markbind/css/markbind.min.css"><link rel="stylesheet" href="/tp/plugins/markbind-plugin-anchors/markbind-plugin-anchors.css"><link rel="stylesheet" href="/tp/plugins/markbind-plugin-tree/markbind-plugin-tree.css">
    
  <link rel="stylesheet" href="/tp/stylesheets/main.css">
<link rel="icon" href="/tp/images/SeEduLogo.png"></head>
<script>
  const baseUrl = '/tp'
</script>
<body  data-bs-spy="scroll" data-bs-target="#mb-page-nav" data-bs-offset="100" >
<div id="app"><!--[--><header sticky><div data-v-2dc82f13><nav class="navbar navbar-expand-md d-print-none navbar-dark bg-dark" data-v-2dc82f13><div class="container-fluid" data-v-2dc82f13><div class="navbar-left" data-v-2dc82f13><!--[--><a href="/tp/index.html" title="Home" class="navbar-brand">BloodNet</a><!--]--></div><div class="navbar-default" data-v-2dc82f13><ul class="navbar-nav me-auto mt-2 mt-lg-0" data-v-2dc82f13><!--[--> <li><a href="/tp/index.html" class="nav-link">Home</a></li> <li><a href="/tp/UserGuide.html" class="nav-link">User Guide</a></li> <li><a href="/tp/DeveloperGuide.html" class="nav-link">Developer Guide</a></li> <li><a href="/tp/AboutUs.html" class="nav-link">About Us</a></li> <li><a href="https://github.com/AY2526S1-CS2103T-T16-4/tp/" target="_blank" class="nav-link"><span><span aria-hidden="true" class="fab fa-github"></span></span></a></li> <!--]--></ul></div><ul class="navbar-nav navbar-right" data-v-2dc82f13><!--[--><li><form class="navbar-form"><div style="position:relative;" class="dropdown" data-v-00e26d0a><!--[--><input value="" data-bs-toggle="dropdown" type="text" class="form-control" placeholder="Search" autocomplete="off" data-v-00e26d0a><div class="form-control placeholder-div-hidden" data-v-00e26d0a>Search</div><!--]--><ul class="dropdown-menu search-dropdown-menu dropdown-menu-hidden dropdown-menu-end" data-v-00e26d0a><!--[--><!--]--></ul></div></form></li><!--]--></ul></div></nav><div style="display:none;" class="lower-navbar-container" data-v-2dc82f13><!--[--><!----><!----><!--]--></div></div></header> <div id="flex-body"><nav id="site-nav" data-v-6b1b63d2><!--[--><div class="site-nav-top"><div class="fw-bold mb-2" style="font-size:1.25rem;">Site Map</div></div> <div class="nav-component slim-scroll"><div class="site-nav-root"><!--[--><ul class="site-nav-list site-nav-list-root" data-v-6b1b63d2><!--[--><li><div class="site-nav-default-list-item site-nav-list-item-0" onclick="handleSiteNavClick(this)"><a href="/tp/index.html">Home</a></div></li> <li><div class="site-nav-default-list-item site-nav-list-item-0" onclick="handleSiteNavClick(this)"><a href="/tp/UserGuide.html">User Guide</a> <div class="site-nav-dropdown-btn-container"><i class="site-nav-dropdown-btn-icon site-nav-rotate-icon" onclick="handleSiteNavClick(this.parentNode.parentNode, false); event.stopPropagation();"><span class="glyphicon glyphicon-menu-down" aria-hidden="true"></span></i></div></div><ul class="site-nav-dropdown-container site-nav-dropdown-container-open site-nav-list"><li><div class="site-nav-default-list-item site-nav-list-item-1" onclick="handleSiteNavClick(this)"><a href="/tp/UserGuide.html#quick-start">Quick Start</a></div></li> <li><div class="site-nav-default-list-item site-nav-list-item-1" onclick="handleSiteNavClick(this)"><a href="/tp/UserGuide.html#command-summary">Command Summary</a></div></li> <li><div class="site-nav-default-list-item site-nav-list-item-1" onclick="handleSiteNavClick(this)"><a href="/tp/UserGuide.html#features">Features</a></div></li> <li><div class="site-nav-default-list-item site-nav-list-item-1" onclick="handleSiteNavClick(this)"><a href="/tp/UserGuide.html#faq">FAQ</a></div></li></ul></li> <li><div class="site-nav-default-list-item site-nav-list-item-0" onclick="handleSiteNavClick(this)"><a href="/tp/DeveloperGuide.html">Developer Guide</a> <div class="site-nav-dropdown-btn-container"><i class="site-nav-dropdown-btn-icon site-nav-rotate-icon" onclick="handleSiteNavClick(this.parentNode.parentNode, false); event.stopPropagation();"><span class="glyphicon glyphicon-menu-down" aria-hidden="true"></span></i></div></div><ul class="site-nav-dropdown-container site-nav-dropdown-container-open site-nav-list"><li><div class="site-nav-default-list-item site-nav-list-item-1" onclick="handleSiteNavClick(this)"><a href="/tp/DeveloperGuide.html#acknowledgements">Acknowledgements</a></div></li> <li><div class="site-nav-default-list-item site-nav-list-item-1" onclick="handleSiteNavClick(this)"><a href="/tp/DeveloperGuide.html#setting-up-getting-started">Setting Up</a></div></li> <li><div class="site-nav-default-list-item site-nav-list-item-1" onclick="handleSiteNavClick(this)"><a href="/tp/DeveloperGuide.html#design">Design</a></div></li> <li><div class="site-nav-default-list-item site-nav-list-item-1" onclick="handleSiteNavClick(this)"><a href="/tp/DeveloperGuide.html#implementation">Implementation</a></div></li> <li><div class="site-nav-default-list-item site-nav-list-item-1" onclick="handleSiteNavClick(this)"><a href="/tp/DeveloperGuide.html#documentation-logging-testing-configuration-dev-ops">Documentation, logging, testing, configuration, dev-ops</a></div></li> <li><div class="site-nav-default-list-item site-nav-list-item-1" onclick="handleSiteNavClick(this)"><a href="/tp/DeveloperGuide.html#appendix-requirements">Appendix: Requirements</a></div></li> <li><div class="site-nav-default-list-item site-nav-list-item-1" onclick="handleSiteNavClick(this)"><a href="/tp/DeveloperGuide.html#appendix-instructions-for-manual-testing">Appendix: Instructions for manual testing</a></div></li> <li><div class="site-nav-default-list-item site-nav-list-item-1" onclick="handleSiteNavClick(this)"><a href="/tp/DeveloperGuide.html#appendix-effort">Appendix: Effort</a></div></li></ul></li> <li><div class="site-nav-default-list-item site-nav-list-item-0" onclick="handleSiteNavClick(this)"><a href="/tp/AboutUs.html">About Us</a></div></li><!--]--><!--v-if--></ul><!--]--></div></div><!--]--><!--v-if--></nav> <div id="content-wrapper"><h1 id="bloodnet-developer-guide">BloodNet Developer Guide<a class="fa fa-anchor" href="#bloodnet-developer-guide" onclick="event.stopPropagation()"></a></h1> <hr> <h2 id="acknowledgements"><strong>Acknowledgements</strong><a class="fa fa-anchor" href="#acknowledgements" onclick="event.stopPropagation()"></a></h2> <ul><li>We acknowledge that the blood donation eligibility criteria implemented in this project were guided by the <a href="https://www.hsa.gov.sg/blood-donation/can-i-donate">Health Sciences Authority (HSA)</a> guidelines in Singapore.</li></ul> <hr> <h2 id="setting-up-getting-started"><strong>Setting up, getting started</strong><a class="fa fa-anchor" href="#setting-up-getting-started" onclick="event.stopPropagation()"></a></h2> <p>Refer to the guide <a href="/tp/SettingUp.html"><em>Setting up and getting started</em></a>.</p> <hr> <h2 id="design"><strong>Design</strong><a class="fa fa-anchor" href="#design" onclick="event.stopPropagation()"></a></h2> <h3 id="architecture">Architecture<a class="fa fa-anchor" href="#architecture" onclick="event.stopPropagation()"></a></h3> <span class="image-wrapper"><img src="/tp/diagrams/ArchitectureDiagram.png" width="280" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span> <p>The <em><strong>Architecture Diagram</strong></em> shown above explains the high-level design of the App.</p> <p>Given below is a quick overview of main components and how they interact with each other.</p> <p><strong>Main components of the architecture</strong></p> <p><strong><code class="hljs inline no-lang">Main</code></strong> (consisting of classes <a href="https://github.com/AY2526S1-CS2103T-T16-4/tp/tree/master/src/main/java/bloodnet"><code class="hljs inline no-lang">Main</code></a> and <a href="https://github.com/AY2526S1-CS2103T-T16-4/tp/blob/master/src/main/java/bloodnet/MainApp.java"><code class="hljs inline no-lang">MainApp</code></a>) is in charge of the app launch and shut down.</p> <ul><li>At app launch, it initializes the other components in the correct sequence, and connects them up with each other.</li> <li>At shut down, it shuts down the other components and invokes cleanup methods where necessary.</li></ul> <p>The bulk of the app&#39;s work is done by the following four components:</p> <ul><li><a href="#ui-component"><strong><code class="hljs inline no-lang">UI</code></strong></a>: The UI of the App.</li> <li><a href="#logic-component"><strong><code class="hljs inline no-lang">Logic</code></strong></a>: The input handler.</li> <li><a href="#model-component"><strong><code class="hljs inline no-lang">Model</code></strong></a>: Holds the data of the App in memory.</li> <li><a href="#storage-component"><strong><code class="hljs inline no-lang">Storage</code></strong></a>: Reads data from, and writes data to, the hard disk.</li> <li><a href="#common-classes"><strong><code class="hljs inline no-lang">Commons</code></strong></a> represents a collection of classes used by multiple other components.</li></ul> <p><strong>How the architecture components interact with each other</strong></p> <p>The <em>Sequence Diagram</em> below shows how the components interact with each other for the scenario where the user issues the command <code class="hljs inline no-lang">delete 1</code> followed by responding with <code class="hljs inline no-lang">yes</code> when user confirmation is sought before the command is executed.</p> <span class="image-wrapper"><img src="/tp/diagrams/ArchitectureSequenceDiagram.png" width="574" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span> <p>Each of the four main components (also shown in the above diagram),</p> <ul><li>defines its <em>API</em> in an <code class="hljs inline no-lang">interface</code> with the same name as the Component.</li> <li>implements its functionality using a concrete <code class="hljs inline no-lang">{Component Name}Manager</code> class (which follows the corresponding API <code class="hljs inline no-lang">interface</code> mentioned in the previous point).</li></ul> <p>For example, the <code class="hljs inline no-lang">Logic</code> component defines its API in the <code class="hljs inline no-lang">Logic.java</code> interface and implements its functionality using the <code class="hljs inline no-lang">LogicManager.java</code> class which follows the <code class="hljs inline no-lang">Logic</code> interface. Other components interact with a given component through its interface rather than the concrete class (reason: to prevent outside component&#39;s being coupled to the implementation of a component), as illustrated in the (partial) class diagram below.</p> <span class="image-wrapper"><img src="/tp/diagrams/ComponentManagers.png" width="300" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span> <p>The sections below give more details of each component.</p> <h3 id="ui-component">UI component<a class="fa fa-anchor" href="#ui-component" onclick="event.stopPropagation()"></a></h3> <p>The <strong>API</strong> of this component is specified in <a href="https://github.com/AY2526S1-CS2103T-T16-4/tp/blob/master/src/main/java/bloodnet/ui/Ui.java"><code class="hljs inline no-lang">Ui.java</code></a></p> <span class="image-wrapper"><img src="/tp/diagrams/UiClassDiagram.png" alt="Structure of the UI Component" width="" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span> <p>The UI consists of a <code class="hljs inline no-lang">MainWindow</code> that is made up of parts e.g.<code class="hljs inline no-lang">InputBox</code>, <code class="hljs inline no-lang">OutputBox</code>, <code class="hljs inline no-lang">PersonListPanel</code>, <code class="hljs inline no-lang">StatusBarFooter</code> etc. All these, including the <code class="hljs inline no-lang">MainWindow</code>, inherit from the abstract <code class="hljs inline no-lang">UiPart</code> class which captures the commonalities between classes that represent parts of the visible GUI.</p> <p>The <code class="hljs inline no-lang">UI</code> component uses the JavaFx UI framework. The layout of these UI parts are defined in matching <code class="hljs inline no-lang">.fxml</code> files that are in the <code class="hljs inline no-lang">src/main/resources/view</code> folder. For example, the layout of the <a href="https://github.com/AY2526S1-CS2103T-T16-4/tp/blob/master/src/main/java/bloodnet/ui/MainWindow.java"><code class="hljs inline no-lang">MainWindow</code></a> is specified in <a href="https://github.com/AY2526S1-CS2103T-T16-4/tp/blob/master/src/main/resources/view/MainWindow.fxml"><code class="hljs inline no-lang">MainWindow.fxml</code></a></p> <p>The <code class="hljs inline no-lang">UI</code> component,</p> <ul><li>executes user commands using the <code class="hljs inline no-lang">Logic</code> component.</li> <li>listens for changes to <code class="hljs inline no-lang">Model</code> data so that the UI can be updated with the modified data.</li> <li>keeps a reference to the <code class="hljs inline no-lang">Logic</code> component, because the <code class="hljs inline no-lang">UI</code> relies on the <code class="hljs inline no-lang">Logic</code> to execute commands.</li> <li>depends on some classes in the <code class="hljs inline no-lang">Model</code> component, as it displays <code class="hljs inline no-lang">Person</code> object residing in the <code class="hljs inline no-lang">Model</code>.</li></ul> <h3 id="logic-component">Logic component<a class="fa fa-anchor" href="#logic-component" onclick="event.stopPropagation()"></a></h3> <p><strong>API</strong> : <a href="https://github.com/AY2526S1-CS2103T-T16-4/tp/blob/master/src/main/java/bloodnet/logic/Logic.java"><code class="hljs inline no-lang">Logic.java</code></a></p> <p>Here&#39;s a (partial) class diagram of the <code class="hljs inline no-lang">Logic</code> component:</p> <span class="image-wrapper"><img src="/tp/diagrams/LogicClassDiagram.png" width="650" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span> <p>The sequence diagram below illustrates the interactions within the <code class="hljs inline no-lang">Logic</code> component, taking <code class="hljs inline no-lang">handle(&quot;delete 1&quot;)</code> API call followed by a <code class="hljs inline no-lang">handle(&quot;yes&quot;)</code> API call as an example in a freshly started program.</p> <span class="image-wrapper"><img src="/tp/diagrams/DeleteSequenceDiagram.png" alt="Interactions Inside the Logic Component for the `delete 1` Command" width="" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span> <div class="alert box-container seamless" style="" data-v-19514615><!--Icon and vertical divider for seamless header box--><!----><div class="header-and-body" data-v-19514615><!-- Header wrapper, not rendered if there is no header attribute --><!----><!-- Body wrapper --><div class="box-body-wrapper" data-v-19514615><!-- icon on the left, not shown if there is a header --><div class="icon-wrapper text-info" style="" data-v-19514615><!--[--><i class="fas fa-info" data-v-19514615></i><!--]--></div><!-- Icon -- content divider for seamless boxes without the header attribute --><div class="alert-info vertical-divider" aria-hidden="true" data-v-19514615></div><!-- Content wrapper --><div class="contents" style="" data-v-19514615><!--[--><p><strong>Note:</strong> The lifeline for <code class="hljs inline no-lang">DeleteCommandParser</code> should end at the destroy marker (X) but due to a limitation of PlantUML, the lifeline continues till the end of diagram.</p><!--]--></div><!-- dismiss button on the right, not shown if there is a header --><!----></div></div></div> <p>How the <code class="hljs inline no-lang">Logic</code> component works:</p> <ol><li>Receive input</li></ol> <ul><li>The <code class="hljs inline no-lang">Logic</code> is called upon to handle an input</li></ul> <ol start="2"><li>Check for active session</li></ol> <ul><li><code class="hljs inline no-lang">Logic</code> checks for an active current session</li> <li>If there is no active current session:
<ul><li>The input is passed to a <code class="hljs inline no-lang">BloodNetParser</code> object which in turns creates a parser that matches the command (e.g., <code class="hljs inline no-lang">DeleteCommandParser</code>) and uses it to parse the command.</li> <li>This results in a <code class="hljs inline no-lang">Command</code> object (more precisely, an object of one of its subclasses e.g., <code class="hljs inline no-lang">DeleteCommand</code>), which its <code class="hljs inline no-lang">createSession</code> is invoked by <code class="hljs inline no-lang">LogicManager</code>  to create a new <code class="hljs inline no-lang">CommandSession</code> object (more precisely, an object of one of its subclasses e.g., <code class="hljs inline no-lang">ConfirmationCommandSession</code>), which will become <code class="hljs inline no-lang">LogicManager</code>&#39;s <code class="hljs inline no-lang">currentCommandSession</code>.
<ul><li>During the invoking of <code class="hljs inline no-lang">createSession</code>, the <code class="hljs inline no-lang">Command</code> object (depending on its implementation of <code class="hljs inline no-lang">createSession</code>) may interact with the <code class="hljs inline no-lang">Model</code> component to query target objects and/or perform validation checks.</li></ul></li></ul></li></ul> <ol start="3"><li>Advance current session</li></ol> <ul><li>The current session is called upon to handle the input.</li> <li>The result of the input handling is encapsulated as an <code class="hljs inline no-lang">InputResponse</code> object.</li> <li>If the current command session has finished (as checked by its <code class="hljs inline no-lang">isDone</code> method), the current session will be marked as <code class="hljs inline no-lang">null</code>.</li> <li>The <code class="hljs inline no-lang">InputResponse</code> object is then returned back from <code class="hljs inline no-lang">Logic</code>.</li></ul> <h4 id="parsing">Parsing<a class="fa fa-anchor" href="#parsing" onclick="event.stopPropagation()"></a></h4> <p>Here are the other classes in <code class="hljs inline no-lang">Logic</code> (omitted from the class diagram above) that are used for parsing a user command:</p> <span class="image-wrapper"><img src="/tp/diagrams/ParserClasses.png" width="600" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span> <p>How the parsing works:</p> <ul><li>When called upon to parse a user command, the <code class="hljs inline no-lang">BloodNetParser</code> class creates an <code class="hljs inline no-lang">XYZCommandParser</code> (<code class="hljs inline no-lang">XYZ</code> is a placeholder for the specific command name e.g., <code class="hljs inline no-lang">AddCommandParser</code>) which uses the other classes shown above to parse the user command and create a <code class="hljs inline no-lang">XYZCommand</code> object (e.g., <code class="hljs inline no-lang">AddCommand</code>) which the <code class="hljs inline no-lang">BloodNetParser</code> returns back as a <code class="hljs inline no-lang">Command</code> object.</li> <li>All <code class="hljs inline no-lang">XYZCommandParser</code> classes (e.g., <code class="hljs inline no-lang">AddCommandParser</code>, <code class="hljs inline no-lang">DeleteCommandParser</code>, ...) inherit from the <code class="hljs inline no-lang">Parser</code> interface so that they can be treated similarly where possible e.g, during testing.</li></ul> <h4 id="command-sessions">Command Sessions<a class="fa fa-anchor" href="#command-sessions" onclick="event.stopPropagation()"></a></h4> <p><code class="hljs inline no-lang">CommandSession</code> is an abstraction that has been developed to manage user interactivity during a command lifecycle in a maintainable and extensible way. It encapsulates the state and logic needed to handle multi-step (which includes single-step) interactions, while keeping the <code class="hljs inline no-lang">Command</code> execution logic separate from input handling. Since <code class="hljs inline no-lang">CommandSession</code> does not implement the <code class="hljs inline no-lang">Command</code>&#39;s execution logic itself, this logic is typically passed in during construction either by providing the <code class="hljs inline no-lang">Command</code> object itself or by wrapping it in a help object (e.g., <code class="hljs inline no-lang">DeferredExecution</code>).</p> <p>By using sessions, the system can:</p> <ul><li>Pause a command mid-lifecycle to wait for user input</li> <li>Maintain contextual information across multiple user inputs</li></ul> <p>To make the handling of user inputs (regardless of whether it is a command input or session input) uniform, <strong>all commands create a <code class="hljs inline no-lang">CommandSession</code> via `Command#createSession(Model model)</strong>, regardless of whether they are interactive or single-step:</p> <ul><li><strong>Interactive commands</strong> (e.g., <code class="hljs inline no-lang">delete</code>) creates a specialised session like <code class="hljs inline no-lang">ConfirmationCommandSession</code> that manage multi-step interactions</li> <li><strong>Single-step commands</strong> (e.g., <code class="hljs inline no-lang">list</code>) creates a <code class="hljs inline no-lang">SingleStepCommandSession</code> which immediately carry out the command&#39;s execution. This is the default behaviour of a <code class="hljs inline no-lang">Command</code> if <code class="hljs inline no-lang">Command#createSession(Model)</code> is not overridden.</li></ul> <p>This design allows the <code class="hljs inline no-lang">LogicManager</code> to <strong>treat all user inputs uniformly</strong>, using the presence or absence of a <code class="hljs inline no-lang">currentCommandSession</code> to determine whether an input should be treated as a new command input.</p> <p>The method <code class="hljs inline no-lang">CommandSession#isDone()</code> is then used by <code class="hljs inline no-lang">LogicManager</code> to determine whether a session has completed. Once it returns <code class="hljs inline no-lang">true</code>, the session is cleaned up, clearing <code class="hljs inline no-lang">currentCommandSession</code> and allowing the next command input to be processed.</p> <p>The following activity diagram summarises the session lifecycle management when the user inputs something:</p> <span class="image-wrapper"><img src="/tp/diagrams/CommandSessionActivityDiagram.png" width="600" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span> <h3 id="model-component">Model component<a class="fa fa-anchor" href="#model-component" onclick="event.stopPropagation()"></a></h3> <p><strong>API</strong> : <a href="https://github.com/AY2526S1-CS2103T-T16-4/tp/blob/master/src/main/java/bloodnet/model/Model.java"><code class="hljs inline no-lang">Model.java</code></a></p> <span class="image-wrapper"><img src="/tp/diagrams/ModelClassDiagram.png" width="450" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span> <p>The <code class="hljs inline no-lang">Model</code> component,</p> <ul><li>stores the BloodNet data i.e., all <code class="hljs inline no-lang">Person</code> objects (which are contained in a <code class="hljs inline no-lang">UniquePersonList</code> object).</li> <li>stores the currently &#39;selected&#39; <code class="hljs inline no-lang">Person</code> objects (e.g., results of a search query) as a separate <em>filtered</em> list which is exposed to outsiders as an unmodifiable <code class="hljs inline no-lang">ObservableList&lt;Person&gt;</code> that can be &#39;observed&#39; e.g. the UI can be bound to this list so that the UI automatically updates when the data in the list change.</li> <li>stores a <code class="hljs inline no-lang">UserPref</code> object that represents the user’s preferences. This is exposed to the outside as a <code class="hljs inline no-lang">ReadOnlyUserPref</code> objects.</li> <li>does not depend on any of the other three components (as the <code class="hljs inline no-lang">Model</code> represents data entities of the domain, they should make sense on their own without depending on other components)</li></ul> <h3 id="storage-component">Storage component<a class="fa fa-anchor" href="#storage-component" onclick="event.stopPropagation()"></a></h3> <p><strong>API</strong> : <a href="https://github.com/se-edu/BloodNet-level3/tree/master/src/main/java/bloodnet/storage/Storage.java"><code class="hljs inline no-lang">Storage.java</code></a></p> <span class="image-wrapper"><img src="/tp/diagrams/StorageClassDiagram.png" width="550" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span> <p>The <code class="hljs inline no-lang">Storage</code> component,</p> <ul><li>can save both BloodNet data and user preference data in JSON format, and read them back into corresponding objects.</li> <li>inherits from both <code class="hljs inline no-lang">BloodNetStorage</code> and <code class="hljs inline no-lang">UserPrefStorage</code>, which means it can be treated as either one (if only the functionality of only one is needed).</li> <li>depends on some classes in the <code class="hljs inline no-lang">Model</code> component (because the <code class="hljs inline no-lang">Storage</code> component&#39;s job is to save/retrieve objects that belong to the <code class="hljs inline no-lang">Model</code>)</li></ul> <h3 id="common-classes">Common classes<a class="fa fa-anchor" href="#common-classes" onclick="event.stopPropagation()"></a></h3> <p>Classes used by multiple components are in the <code class="hljs inline no-lang">bloodnet.commons</code> package.</p> <hr> <h2 id="implementation"><strong>Implementation</strong><a class="fa fa-anchor" href="#implementation" onclick="event.stopPropagation()"></a></h2> <p>This section describes some noteworthy details on how certain features are implemented.</p> <h3 id="user-confirmation">User Confirmation<a class="fa fa-anchor" href="#user-confirmation" onclick="event.stopPropagation()"></a></h3> <p>The user confirmation mechanism is facilitated by <code class="hljs inline no-lang">ConfirmationCommandSession</code> class which is an implementation of <code class="hljs inline no-lang">CommandSession</code> (See <a href="#command-sessions">Command Sessions</a> for more details.)</p> <p>The <code class="hljs inline no-lang">ConfirmationCommandSession</code> class manages interactive commands that require explicit user confirmation before execution (i.e., destructive operations).</p> <ul><li>When a command input is identified as requiring confirmation, the <code class="hljs inline no-lang">LogicManager</code> invokes the parsed <code class="hljs inline no-lang">Command</code>&#39;s <code class="hljs inline no-lang">createSession()</code> method, producing a <code class="hljs inline no-lang">ConfirmationCommandSession</code> that stores the execution of the Command in a <code class="hljs inline no-lang">deferredExecution</code> object.</li></ul> <p>To facilitate the handling of inputs within the context of its session, <code class="hljs inline no-lang">ConfirmationCommandSession</code> maintains three internal states:</p> <div class="table-responsive"><table class="markbind-table table table-bordered table-striped"><thead><tr><th>State</th> <th>Description</th> <th>Transition Condition</th></tr></thead> <tbody><tr><td><code class="hljs inline no-lang">INITIAL</code></td> <td>Default state immediately after creation. Ignores the original command input (since its information is already encapsulated within the deferred execution passed into it) and returns a confirmation prompt.</td> <td>Automatically transitions to <code class="hljs inline no-lang">PENDING_CONFIRMATION</code>.</td></tr> <tr><td><code class="hljs inline no-lang">PENDING_CONFIRMATION</code></td> <td>Waits for user input(<code class="hljs inline no-lang">yes</code> or <code class="hljs inline no-lang">no</code> (caps-insensitive)) <br><ul><li><code class="hljs inline no-lang">yes</code> -&gt; carry out deferred execution of command.</li><li><code class="hljs inline no-lang">no</code> -&gt; cancels command</li><li>Other input -&gt; re-prompts user.</li></ul></td> <td>Transitions to <code class="hljs inline no-lang">DONE</code> after confirmation or cancellation</td></tr> <tr><td><code class="hljs inline no-lang">DONE</code></td> <td>Terminal state indicating the session has completed. Any further <code class="hljs inline no-lang">handle()</code> calls throw <code class="hljs inline no-lang">TerminalSessionStateException</code></td> <td>-</td></tr></tbody></table></div><p>The following activity diagrams contrast the flow of a command requiring user confirmation and a single-step command:</p> <span class="image-wrapper"><img src="/tp/diagrams/ConfirmationCommandSessionActivityDiagram.png" alt="ConfirmationCommandSessionActivityDiagram" width="" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span> <span class="image-wrapper"><img src="/tp/diagrams/SingleStepCommandSessionActivityDiagram.png" alt="SingleStepCommandSessionActivityDiagram" width="" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span> <p>For clarity, the above diagrams omit general session handling, command parsing and input delegation. See <a href="#command-sessions"><strong>Command Sessions</strong></a> for a complete overview.</p> <hr> <h2 id="future-implementation"><strong>Future Implementation</strong><a class="fa fa-anchor" href="#future-implementation" onclick="event.stopPropagation()"></a></h2> <p>In the future, we can make the <code class="hljs inline no-lang">FilteredPersonList</code> and <code class="hljs inline no-lang">FilteredDonationRecordList</code> in sync. This means that the <code class="hljs inline no-lang">DonationRecords</code> displayed correspond to the <code class="hljs inline no-lang">Persons</code> displayed at all times. For example, when the user finds eligible blood donors from the list of <code class="hljs inline no-lang">Persons</code>, the <code class="hljs inline no-lang">DonationRecordsList</code> will be filtered such that only records which correspond to the displayed <code class="hljs inline no-lang">Persons</code> are shown.</p> <p>The diagram below illustrates a potential implementation using the <code class="hljs inline no-lang">FindEligible</code> command.</p> <span class="image-wrapper"><img src="/tp/diagrams/FutureUIImplementationForFindEligible.png" alt="FutureUIImplementationForFindEligible" width="" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span></div> <nav id="page-nav" data-v-6b1b63d2><!--[--><div class="nav-component slim-scroll"><nav id="mb-page-nav" class="nav nav-pills flex-column my-0 small no-flex-wrap" data-v-6b1b63d2><!--[--><a class="nav-link py-1" href="#bloodnet-developer-guide">BloodNet Developer Guide‎</a> <nav class="nav nav-pills flex-column my-0 nested no-flex-wrap"><a class="nav-link py-1" href="#acknowledgements">Acknowledgements‎</a> <a class="nav-link py-1" href="#setting-up-getting-started">Setting up, getting started‎</a> <a class="nav-link py-1" href="#design">Design‎</a> <nav class="nav nav-pills flex-column my-0 nested no-flex-wrap"><a class="nav-link py-1" href="#architecture">Architecture‎</a> <a class="nav-link py-1" href="#ui-component">UI component‎</a> <a class="nav-link py-1" href="#logic-component">Logic component‎</a> <a class="nav-link py-1" href="#model-component">Model component‎</a> <a class="nav-link py-1" href="#storage-component">Storage component‎</a> <a class="nav-link py-1" href="#common-classes">Common classes‎</a></nav> <a class="nav-link py-1" href="#implementation">Implementation‎</a> <nav class="nav nav-pills flex-column my-0 nested no-flex-wrap"><a class="nav-link py-1" href="#user-confirmation">User Confirmation‎</a></nav> <a class="nav-link py-1" href="#future-implementation">Future Implementation‎</a></nav><!--]--><!--v-if--></nav></div><!--]--><!--v-if--></nav> <div class="scroll-top-button fa-lg d-print-none" style="display:none;bottom:2%;right:2%;position:fixed;" aria-hidden="true"><!--[--><i class="fas fa-arrow-circle-up"></i><!--]--></div></div> <footer><div class="text-center"><small>[<span><strong>Powered by</strong></span> <img src="https://markbind.org/favicon.ico" width="30"> <a href="https://markbind.org/">MarkBind 6.0.2</a>, generated on Thu, 30 Oct 2025, 23:41:35 GMT+8]</small></div></footer><!--]--></div>
</body><script src="/tp/markbind/js/bootstrap-utility.min.js"></script>
<script src="/tp/markbind/js/polyfill.min.js"></script>
<script src="/tp/markbind/js/vue.global.prod.min.js"></script>
<script src="/tp/markbind/js/markbind.min.js"></script>
<script src="DeveloperGuide.page-vue-render.js"></script>
<script>
  MarkBind.setupWithSearch()
</script>
</html>
